!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.jqueryAjaxRequest=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module){(function(global){var $,URI,stableStringify,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};$="undefined"!=typeof window?window.$:"undefined"!=typeof global?global.$:null,_="undefined"!=typeof window?window._:"undefined"!=typeof global?global._:null,URI=_dereq_("uri-js"),stableStringify=_dereq_("json-stable-stringify"),module.exports=function(options){var Request,appendToCacheKey,defaultFailHandler,injectData,onBeforeRequestStarts,onRequestEnded,retrieveCache,storeCache;return defaultFailHandler=(null!=options?options.defaultFailHandler:void 0)||function(){},onBeforeRequestStarts=(null!=options?options.onBeforeRequestStarts:void 0)||function(){},onRequestEnded=(null!=options?options.onRequestEnded:void 0)||function(){},injectData=(null!=options?options.injectData:void 0)||function(d){return d},storeCache=(null!=options?options.storeCache:void 0)||function(){},retrieveCache=(null!=options?options.retrieveCache:void 0)||function(key,cb){return cb(null)},appendToCacheKey=(null!=options?options.appendToCacheKey:void 0)||"",Request=function(){function Request(method,url){var _ref;if(this.method=method,this.url=url,this._generateCacheKey=__bind(this._generateCacheKey,this),this._useCacheIfPossible=__bind(this._useCacheIfPossible,this),this._executeGetRequest=__bind(this._executeGetRequest,this),this._executePostRequest=__bind(this._executePostRequest,this),this._prepareToRequest=__bind(this._prepareToRequest,this),this._createErrorCallback=__bind(this._createErrorCallback,this),this._createSuccessCallback=__bind(this._createSuccessCallback,this),this.end=__bind(this.end,this),this.option=__bind(this.option,this),this.useCache=__bind(this.useCache,this),this.acceptsJSON=__bind(this.acceptsJSON,this),this.acceptsText=__bind(this.acceptsText,this),this.fail=__bind(this.fail,this),this.send=__bind(this.send,this),this.query=__bind(this.query,this),"GET"!==(_ref=this.method)&&"POST"!==_ref&&"DELETE"!==_ref&&"PUT"!==_ref)throw new Error("Method must be supported");if(!_.isString(this.url))throw new Error("Url must be informed");this._query={},this.options={acceptsJSON:!0,background:!1},this._json=void 0,this.onFail=defaultFailHandler,this._cacheKey=void 0,this._usedCache=!1}return Request.post=function(url){return new Request("POST",url)},Request.get=function(url){return new Request("GET",url)},Request.put=function(url){return new Request("PUT",url)},Request["delete"]=function(url){return new Request("DELETE",url)},Request.del=function(url){return new Request("DELETE",url)},Request.prototype.query=function(query){if(!_.isObject(query))throw new Error("Query must be an object");return this._query=_.extend(this._query,query),this},Request.prototype.send=function(json){if(!_.isObject(json))throw new Error("Json must be an object");if(_.isArray(json))throw new Error("Json cant be an array");return this._json=json,this},Request.prototype.fail=function(fn){if(!_.isFunction(fn))throw new Error("Function must be informed");return this.onFail=fn,this},Request.prototype.acceptsText=function(){return this.options.acceptsJSON=!1,this},Request.prototype.acceptsJSON=function(){return this.options.acceptsJSON=!0,this},Request.prototype.useCache=function(){return this.options.useCache=!0,this},Request.prototype.option=function(opt,value){return this.options[opt]=value,this},Request.prototype.end=function(userCallback){var callback;if(void 0!==userCallback&&!_.isFunction(userCallback))throw new Error("Callback must be a function or not defined at all");if(userCallback=userCallback||function(){},callback=this._createSuccessCallback(userCallback),"POST"===this.method)return this._executePostRequest(callback);if("GET"===this.method)return this._executeGetRequest(callback);throw new Error("Method "+this.method+" not supported")},Request.prototype._createSuccessCallback=function(callback){if(!_.isFunction(callback))throw new Error("Callback must be a function");return function(_this){return function(data){return _this.options.useCache!==!0||null==data||_this._usedCache||storeCache(_this._generateCacheKey(),data),onRequestEnded(_this),callback.apply(null,arguments)}}(this)},Request.prototype._createErrorCallback=function(){return function(_this){return function(){return onRequestEnded(_this),_this.onFail.apply(null,[null,arguments[0],_this.options,arguments[2]])}}(this)},Request.prototype._prepareToRequest=function(){return _.isEmpty(this._query)||(this.url=URI(this.url).query(this._query).toString()),onBeforeRequestStarts(this)},Request.prototype._executePostRequest=function(callback){return this._prepareToRequest(),this._useCacheIfPossible(function(_this){return function(result){var ajaxOptions;return result?(_this._usedCache=!0,callback(result)):(ajaxOptions={cache:!1,type:_this.method,url:_this.url,data:JSON.stringify(injectData(_this._json||{})),success:callback,error:_this._createErrorCallback(),contentType:"application/json",dataType:"json",global:!1},_this.options.acceptsJSON||delete ajaxOptions.dataType,$.ajax(ajaxOptions))}}(this))},Request.prototype._executeGetRequest=function(callback){return this._prepareToRequest(),this._useCacheIfPossible(function(_this){return function(result){var ajaxOptions;return result?(_this._usedCache=!0,callback(result)):(ajaxOptions={cache:!1,type:"GET",url:_this.url,success:callback,error:_this._createErrorCallback(),contentType:"application/json",dataType:"json",global:!1},_this.options.acceptsJSON||delete ajaxOptions.dataType,$.ajax(ajaxOptions))}}(this))},Request.prototype._useCacheIfPossible=function(callback){return this.options.useCache===!0?retrieveCache(this._generateCacheKey(),callback):callback(null)},Request.prototype._generateCacheKey=function(){return null==this._cacheKey&&(this._cacheKey=""+appendToCacheKey+"-"+this.method+"-"+this.url,_.isEmpty(this._query)||(this._cacheKey=this._cacheKey+"-"+stableStringify(this._query)),_.isEmpty(this._json)||(this._cacheKey=this._cacheKey+"-"+stableStringify(this._json))),this._cacheKey},Request}()}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"json-stable-stringify":2,"uri-js":9}],2:[function(_dereq_,module){var json="undefined"!=typeof JSON?JSON:_dereq_("jsonify");module.exports=function(obj,opts){opts||(opts={}),"function"==typeof opts&&(opts={cmp:opts});var space=opts.space||"";"number"==typeof space&&(space=Array(space+1).join(" "));var cycles="boolean"==typeof opts.cycles?opts.cycles:!1,replacer=opts.replacer||function(key,value){return value},cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]},bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp),seen=[];return function stringify(parent,key,node,level){var indent=space?"\n"+new Array(level+1).join(space):"",colonSeparator=space?": ":":";if(node&&node.toJSON&&"function"==typeof node.toJSON&&(node=node.toJSON()),node=replacer.call(parent,key,node),void 0!==node){if("object"!=typeof node||null===node)return json.stringify(node);if(isArray(node)){for(var out=[],i=0;i<node.length;i++){var item=stringify(node,i,node[i],level+1)||json.stringify(null);out.push(indent+space+item)}return"["+out.join(",")+indent+"]"}if(-1!==seen.indexOf(node)){if(cycles)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}seen.push(node);for(var keys=objectKeys(node).sort(cmp&&cmp(node)),out=[],i=0;i<keys.length;i++){var key=keys[i],value=stringify(node,key,node[key],level+1);if(value){var keyValue=json.stringify(key)+colonSeparator+value;out.push(indent+space+keyValue)}}return"{"+out.join(",")+indent+"}"}}({"":obj},"",obj,0)};var isArray=Array.isArray||function(x){return"[object Array]"==={}.toString.call(x)},objectKeys=Object.keys||function(obj){var has=Object.prototype.hasOwnProperty||function(){return!0},keys=[];for(var key in obj)has.call(obj,key)&&keys.push(key);return keys}},{jsonify:3}],3:[function(_dereq_,module,exports){exports.parse=_dereq_("./lib/parse"),exports.stringify=_dereq_("./lib/stringify")},{"./lib/parse":4,"./lib/stringify":5}],4:[function(_dereq_,module){var at,ch,text,value,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected '"+c+"' instead of '"+ch+"'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isFinite(number)?number:void error("Bad number")},string=function(){var hex,i,uffff,string="";if('"'===ch)for(;next();){if('"'===ch)return next(),string;if("\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected '"+ch+"'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key "'+key+'"'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};value=function(){switch(white(),ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},module.exports=function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}},{}],5:[function(_dereq_,module){function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)k=rep[i],"string"==typeof k&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var gap,indent,rep,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};module.exports=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}},{}],6:[function(_dereq_){_dereq_("./schemes/http"),_dereq_("./schemes/urn")},{"./schemes/http":7,"./schemes/urn":8}],7:[function(_dereq_){!function(){var URI=_dereq_("../uri").URI;URI.SCHEMES.http={serialize:function(components){return(80===components.port||""===components.port)&&(components.port=void 0),components.path||(components.path="/"),components}}}()},{"../uri":9}],8:[function(_dereq_){!function(){var URI_NS=_dereq_("../uri"),URI=URI_NS.URI,pctEncChar=URI_NS.pctEncChar,NID$="(?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31})",PCT_ENCODED$="(?:\\%[0-9A-Fa-f]{2})",TRANS$$="[0-9A-Za-z\\(\\)\\+\\,\\-\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\/\\?\\#]",NSS$="(?:(?:"+PCT_ENCODED$+"|"+TRANS$$+")+)",URN_SCHEME=new RegExp("^urn\\:("+NID$+")$"),URN_PATH=new RegExp("^("+NID$+")\\:("+NSS$+")$"),URN_PARSE=/^([^\:]+)\:(.*)/,URN_EXCLUDED=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;URI.SCHEMES.urn={parse:function(components,options){var scheme,schemeHandler,matches=components.path.match(URN_PATH);return matches||(options.tolerant||components.errors.push("URN is not strictly valid."),matches=components.path.match(URN_PARSE)),matches?(scheme="urn:"+matches[1].toLowerCase(),schemeHandler=URI.SCHEMES[scheme],schemeHandler||(schemeHandler=URI.SCHEMES[scheme]={}),schemeHandler.serialize||(schemeHandler.serialize=URI.SCHEMES.urn.serialize),components.scheme=scheme,components.path=matches[2],schemeHandler.parse&&schemeHandler.parse(components,options)):components.errors.push("URN can not be parsed."),components},serialize:function(components,options){var matches,scheme=components.scheme||options.scheme;if(scheme&&"urn"!==scheme){var matches=scheme.match(URN_SCHEME);matches||(matches=["urn:"+scheme,scheme]),components.scheme="urn",components.path=matches[1]+":"+(components.path?components.path.replace(URN_EXCLUDED,pctEncChar):"")}return components}},URI.SCHEMES["urn:uuid"]={parse:function(components,options){options.tolerant||components.path&&components.path.match(UUID)||components.errors.push("UUID is not valid.")},serialize:function(components,options){return options.tolerant||components.path&&components.path.match(UUID)?components.path=(components.path||"").toLowerCase():components.scheme=void 0,URI.SCHEMES.urn.serialize(components,options)}}}()},{"../uri":9}],9:[function(_dereq_,module,exports){"undefined"==typeof exports&&(exports={}),"function"!=typeof _dereq_&&(_dereq_=function(){"use strict";return exports}),URI=function(){"use strict";var mergeSet=function(sets){for(var set=sets,x=1,nextSet=arguments[x];nextSet;)set=set.slice(0,-1)+nextSet.slice(1),nextSet=arguments[++x];return set},subexp=function(str){return"(?:"+str+")"},ALPHA$$="[A-Za-z]",DIGIT$$="[0-9]",HEXDIG$$=mergeSet(DIGIT$$,"[A-Fa-f]"),PCT_ENCODED$=subexp("%"+HEXDIG$$+HEXDIG$$),GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=mergeSet(GEN_DELIMS$$,SUB_DELIMS$$),UNRESERVED$$=mergeSet(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]"),SCHEME$=subexp(ALPHA$$+mergeSet(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*"),USERINFO$=subexp(subexp(PCT_ENCODED$+"|"+mergeSet(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*"),DEC_OCTET$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("[1-9]"+DIGIT$$)+"|"+DIGIT$$),IPV4ADDRESS$=subexp(DEC_OCTET$+"\\."+DEC_OCTET$+"\\."+DEC_OCTET$+"\\."+DEC_OCTET$),H16$=subexp(HEXDIG$$+"{1,4}"),IPV6ADDRESS$=(subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),subexp(mergeSet(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+")),IPVFUTURE$=subexp("v"+HEXDIG$$+"+\\."+mergeSet(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+"),IP_LITERAL$=subexp("\\["+subexp(IPV6ADDRESS$+"|"+IPVFUTURE$)+"\\]"),REG_NAME$=subexp(subexp(PCT_ENCODED$+"|"+mergeSet(UNRESERVED$$,SUB_DELIMS$$))+"*"),HOST$=subexp(IP_LITERAL$+"|"+IPV4ADDRESS$+"|"+REG_NAME$),PORT$=subexp(DIGIT$$+"*"),AUTHORITY$=subexp(subexp(USERINFO$+"@")+"?"+HOST$+subexp("\\:"+PORT$)+"?"),PCHAR$=subexp(PCT_ENCODED$+"|"+mergeSet(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]")),SEGMENT$=subexp(PCHAR$+"*"),SEGMENT_NZ$=subexp(PCHAR$+"+"),SEGMENT_NZ_NC$=subexp(subexp(PCT_ENCODED$+"|"+mergeSet(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+"),PATH_ABEMPTY$=subexp(subexp("\\/"+SEGMENT$)+"*"),PATH_ABSOLUTE$=subexp("\\/"+subexp(SEGMENT_NZ$+PATH_ABEMPTY$)+"?"),PATH_NOSCHEME$=subexp(SEGMENT_NZ_NC$+PATH_ABEMPTY$),PATH_ROOTLESS$=subexp(SEGMENT_NZ$+PATH_ABEMPTY$),PATH_EMPTY$=subexp(""),QUERY$=(subexp(PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),subexp(subexp(PCHAR$+"|[\\/\\?]")+"*")),FRAGMENT$=subexp(subexp(PCHAR$+"|[\\/\\?]")+"*"),HIER_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),URI$=subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),RELATIVE_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$),RELATIVE$=subexp(RELATIVE_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),GENERIC_REF$=(subexp(URI$+"|"+RELATIVE$),subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"),"^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$"),RELATIVE_REF$="^(){0}"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$",URI_REF=("^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?$","^"+subexp("\\#("+FRAGMENT$+")")+"?$","^"+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?$",new RegExp("("+GENERIC_REF$+")|("+RELATIVE_REF$+")")),NOT_SCHEME=new RegExp(mergeSet("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO=new RegExp(mergeSet("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST=new RegExp(mergeSet("[^\\%]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH=new RegExp(mergeSet("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME=new RegExp(mergeSet("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY=new RegExp(mergeSet("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),NOT_FRAGMENT=NOT_QUERY,ESCAPE=new RegExp(mergeSet("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED=new RegExp(UNRESERVED$$,"g"),PCT_ENCODEDS=(new RegExp(mergeSet("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),new RegExp(PCT_ENCODED$+"+","g")),URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,RDS1=/^\.\.?\//,RDS2=/^\/\.(\/|$)/,RDS3=/^\/\.\.(\/|$)/,RDS5=/^\/?(?:.|\n)*?(?=\/|$)/,NO_MATCH_IS_UNDEFINED=void 0==="".match(/(){0}/)[1],pctEncChar=function(chr){var e,c=chr.charCodeAt(0);return e=16>c?"%0"+c.toString(16).toUpperCase():128>c?"%"+c.toString(16).toUpperCase():2048>c?"%"+(c>>6|192).toString(16).toUpperCase()+"%"+(63&c|128).toString(16).toUpperCase():"%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(63&c|128).toString(16).toUpperCase()},pctDecUnreserved=function(str){for(var c,s,newStr="",i=0;i<str.length;)c=parseInt(str.substr(i+1,2),16),128>c?(s=String.fromCharCode(c),newStr+=s.match(UNRESERVED)?s:str.substr(i,3),i+=3):c>191&&224>c?(newStr+=str.substr(i,6),i+=6):(newStr+=str.substr(i,9),i+=9);return newStr},pctDecChars=function(str){for(var c,c2,c3,newStr="",i=0;i<str.length;)c=parseInt(str.substr(i+1,2),16),128>c?(newStr+=String.fromCharCode(c),i+=3):c>191&&224>c?(c2=parseInt(str.substr(i+4,2),16),newStr+=String.fromCharCode((31&c)<<6|63&c2),i+=6):(c2=parseInt(str.substr(i+4,2),16),c3=parseInt(str.substr(i+7,2),16),newStr+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=9);return newStr},typeOf=function(o){return void 0===o?"undefined":null===o?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase()},Components=function(){this.errors=[]},URI=exports;return Components.prototype={scheme:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},URI.SCHEMES={},URI.parse=function(uriString,options){var matches,schemeHandler,components=new Components;return uriString=uriString?uriString.toString():"",options=options||{},"suffix"===options.reference&&(uriString=(options.scheme?options.scheme+":":"")+"//"+uriString),matches=uriString.match(URI_REF),matches&&(matches=matches[1]?matches.slice(1,10):matches.slice(10,19)),matches||(options.tolerant||components.errors.push("URI is not strictly valid."),matches=uriString.match(URI_PARSE)),matches?(NO_MATCH_IS_UNDEFINED?(components.scheme=matches[1],components.userinfo=matches[3],components.host=matches[4],components.port=parseInt(matches[5],10),components.path=matches[6]||"",components.query=matches[7],components.fragment=matches[8],isNaN(components.port)&&(components.port=matches[5])):(components.scheme=matches[1]||void 0,components.userinfo=-1!==uriString.indexOf("@")?matches[3]:void 0,components.host=-1!==uriString.indexOf("//")?matches[4]:void 0,components.port=parseInt(matches[5],10),components.path=matches[6]||"",components.query=-1!==uriString.indexOf("?")?matches[7]:void 0,components.fragment=-1!==uriString.indexOf("#")?matches[8]:void 0,isNaN(components.port)&&(components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:void 0)),components.reference=void 0===components.scheme&&void 0===components.userinfo&&void 0===components.host&&void 0===components.port&&void 0===components.path&&void 0===components.query?"same-document":void 0===components.scheme?"relative":void 0===components.fragment?"absolute":"uri",options.reference&&"suffix"!==options.reference&&options.reference!==components.reference&&components.errors.push("URI is not a "+options.reference+" reference."),schemeHandler=URI.SCHEMES[(options.scheme||components.scheme||"").toLowerCase()],schemeHandler&&schemeHandler.parse&&schemeHandler.parse(components,options)):components.errors.push("URI can not be parsed."),components},URI._recomposeAuthority=function(components){var uriTokens=[];return void 0!==components.userinfo&&(uriTokens.push(components.userinfo.toString().replace(NOT_USERINFO,pctEncChar)),uriTokens.push("@")),void 0!==components.host&&uriTokens.push(components.host.toString().toLowerCase().replace(NOT_HOST,pctEncChar)),"number"==typeof components.port&&(uriTokens.push(":"),uriTokens.push(components.port.toString(10))),uriTokens.length?uriTokens.join(""):void 0},URI.removeDotSegments=function(input){for(var s,output=[];input.length;)input.match(RDS1)?input=input.replace(RDS1,""):input.match(RDS2)?input=input.replace(RDS2,"/"):input.match(RDS3)?(input=input.replace(RDS3,"/"),output.pop()):"."===input||".."===input?input="":(s=input.match(RDS5)[0],input=input.slice(s.length),output.push(s));return output.join("")},URI.serialize=function(components,options){var schemeHandler,authority,s,uriTokens=[];return options=options||{},schemeHandler=URI.SCHEMES[(options.scheme||components.scheme||"").toLowerCase()],schemeHandler&&schemeHandler.serialize&&schemeHandler.serialize(components,options),"suffix"!==options.reference&&components.scheme&&(uriTokens.push(components.scheme.toString().toLowerCase().replace(NOT_SCHEME,"")),uriTokens.push(":")),authority=URI._recomposeAuthority(components),void 0!==authority&&("suffix"!==options.reference&&uriTokens.push("//"),uriTokens.push(authority),components.path&&"/"!==components.path.charAt(0)&&uriTokens.push("/")),void 0!==components.path&&(s=URI.removeDotSegments(components.path.toString().replace(/%2E/gi,".")),s=components.scheme?s.replace(NOT_PATH,pctEncChar):s.replace(NOT_PATH_NOSCHEME,pctEncChar),void 0===authority&&(s=s.replace(/^\/\//,"/%2F")),uriTokens.push(s)),void 0!==components.query&&(uriTokens.push("?"),uriTokens.push(components.query.toString().replace(NOT_QUERY,pctEncChar))),void 0!==components.fragment&&(uriTokens.push("#"),uriTokens.push(components.fragment.toString().replace(NOT_FRAGMENT,pctEncChar))),uriTokens.join("").replace(PCT_ENCODEDS,pctDecUnreserved).replace(/%[0-9A-Fa-f]{2}/g,function(str){return str.toUpperCase()})},URI.resolveComponents=function(base,relative,options,skipNormalization){var target=new Components;return skipNormalization||(base=URI.parse(URI.serialize(base,options),options),relative=URI.parse(URI.serialize(relative,options),options)),options=options||{},!options.tolerant&&relative.scheme?(target.scheme=relative.scheme,target.userinfo=relative.userinfo,target.host=relative.host,target.port=relative.port,target.path=URI.removeDotSegments(relative.path),target.query=relative.query):(void 0!==relative.userinfo||void 0!==relative.host||void 0!==relative.port?(target.userinfo=relative.userinfo,target.host=relative.host,target.port=relative.port,target.path=URI.removeDotSegments(relative.path),target.query=relative.query):(relative.path?("/"===relative.path.charAt(0)?target.path=URI.removeDotSegments(relative.path):(target.path=void 0===base.userinfo&&void 0===base.host&&void 0===base.port||base.path?base.path?base.path.slice(0,base.path.lastIndexOf("/")+1)+relative.path:relative.path:"/"+relative.path,target.path=URI.removeDotSegments(target.path)),target.query=relative.query):(target.path=base.path,target.query=void 0!==relative.query?relative.query:base.query),target.userinfo=base.userinfo,target.host=base.host,target.port=base.port),target.scheme=base.scheme),target.fragment=relative.fragment,target},URI.resolve=function(baseURI,relativeURI,options){return URI.serialize(URI.resolveComponents(URI.parse(baseURI,options),URI.parse(relativeURI,options),options,!0),options)},URI.normalize=function(uri,options){return"string"==typeof uri?uri=URI.serialize(URI.parse(uri,options),options):"object"===typeOf(uri)&&(uri=URI.parse(URI.serialize(uri,options),options)),uri},URI.equal=function(uriA,uriB,options){return"string"==typeof uriA?uriA=URI.serialize(URI.parse(uriA,options),options):"object"===typeOf(uriA)&&(uriA=URI.serialize(uriA,options)),"string"==typeof uriB?uriB=URI.serialize(URI.parse(uriB,options),options):"object"===typeOf(uriB)&&(uriB=URI.serialize(uriB,options)),uriA===uriB},URI.escapeComponent=function(str){return str&&str.toString().replace(ESCAPE,pctEncChar)},URI.unescapeComponent=function(str){return str&&str.toString().replace(PCT_ENCODEDS,pctDecChars)},exports.pctEncChar=pctEncChar,exports.pctDecChars=pctDecChars,exports.Components=Components,exports.URI=URI,exports.pctEncChar=pctEncChar,exports.pctDecChars=pctDecChars,exports.Components=Components,exports.URI={SCHEMES:URI.SCHEMES,parse:URI.parse,removeDotSegments:URI.removeDotSegments,serialize:URI.serialize,resolveComponents:URI.resolveComponents,resolve:URI.resolve,normalize:URI.normalize,equal:URI.equal,escapeComponent:URI.escapeComponent,unescapeComponent:URI.unescapeComponent},_dereq_("./schemes"),URI}()},{"./schemes":6}]},{},[1])(1)});